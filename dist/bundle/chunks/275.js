/*! For license information please see 275.js.LICENSE.txt */
(self.webpackChunkwp_travel_engine=self.webpackChunkwp_travel_engine||[]).push([[275],{2462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{bookingModalContext:()=>We,useBookingModalContext:()=>Ye});var n=r(6540),a=r(5338),o=r(961);const i=function(e){var t=e.isOpen,r=e.setIsOpen,a=e.children,i=(0,n.useRef)(null),c=(0,n.useRef)(null);(0,n.useEffect)((function(){t&&(document.body.style.overflow="hidden",c.current.classList.add("showing"),setTimeout((function(){c.current.classList.remove("showing")}),300))}),[t]);var l=function(){document.body.style.overflow="",c.current.classList.add("hiding"),setTimeout((function(){r(!1)}),300)};return React.createElement(React.Fragment,null,t&&(0,o.createPortal)(React.createElement("div",{ref:c,className:"wpte-modal__screen-overlay",onClick:function(e){i.current.contains(e.target)||l()}},React.createElement("div",{ref:i,className:"wpte-modal"},React.createElement("button",{type:"button",role:"close-button",className:"wpte-modal__close-button",onClick:function(){return l()}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}))),a)),document.body))};var c=r(1138),l=r(5093),u=r.n(l),s=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"2",viewBox:"0 0 14 2"},React.createElement("path",{"data-name":"Path 23951",d:"M0,0H12",transform:"translate(1 1)",fill:"none",stroke:"#170d44",strokeLinecap:"round",strokeWidth:"2",opacity:"0.5"})),f=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14"},React.createElement("g",{"data-name":"Group 2263",transform:"translate(-78 -14)",opacity:"0.5"},React.createElement("line",{"data-name":"Line 2",x2:"12",transform:"translate(79 21)",fill:"none",stroke:"#170d44",strokeLinecap:"round",strokeWidth:"2"}),React.createElement("line",{"data-name":"Line 3",x2:"12",transform:"translate(84.999 15) rotate(90)",fill:"none",stroke:"#170d44",strokeLinecap:"round",strokeWidth:"2"}))),p={minus:s,plus:f,calendar:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"14",viewBox:"0 0 13 14"},React.createElement("g",{id:"Group_2371","data-name":"Group 2371",transform:"translate(0)"},React.createElement("rect",{id:"Rectangle_1682","data-name":"Rectangle 1682",width:"13",height:"3",transform:"translate(0)",fill:"#170d44",opacity:"0.6"}),React.createElement("g",{id:"Rectangle_1683","data-name":"Rectangle 1683",transform:"translate(0 3)",fill:"none",strokeWidth:"1",opacity:"0.6"},React.createElement("rect",{width:"13",height:"11",stroke:"none"}),React.createElement("rect",{x:"0.5",y:"0.5",width:"12",height:"10",fill:"none"})))),suitcase:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"14.812",viewBox:"0 0 10 14.812"},React.createElement("g",{id:"Group_2254","data-name":"Group 2254",transform:"translate(-1072.099 -77)"},React.createElement("g",{id:"Group_2416","data-name":"Group 2416",transform:"translate(1072.099 77)"},React.createElement("path",{id:"Path_23953","data-name":"Path 23953",d:"M33.115,6.1h-1.6V4.317a1.055,1.055,0,0,0-1.158-.9h-2.02a1.055,1.055,0,0,0-1.158.9V6.1h-1.6a1.121,1.121,0,0,0-1.232.958v9.236a1.1211.121,0,0,0,1.232.958h.628v.594a.448.448,0,0,0,.492.383h.32a.448.448,0,0,0,.493-.383v-.594h3.67v.594a.448.448,0,0,0,.493.383h.32a.448.448,0,0,0,.493-.383v-.594h.628a1.121,1.121,00,0,1.232-.958V7.057A1.12,1.12,0,0,0,33.115,6.1Zm-5.1-1.782a.292.292,0,0,1,.32-.249h2.02a.292.292,0,0,1,.32.249V6.1h-2.66Z",transform:"translate(-24.346 -3.416)"})))),dots:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"4",viewBox:"0 0 16 4"},React.createElement("g",{id:"Group_2257","data-name":"Group 2257",transform:"translate(-349.914 -82)"},React.createElement("g",{id:"Group_2418","data-name":"Group 2418"},React.createElement("circle",{id:"Ellipse_100","data-name":"Ellipse 100",cx:"2",cy:"2",r:"2",transform:"translate(349.914 82)"}),React.createElement("circle",{id:"Ellipse_101","data-name":"Ellipse 101",cx:"2",cy:"2",r:"2",transform:"translate(355.914 82)"}),React.createElement("circle",{id:"Ellipse_102","data-name":"Ellipse 102",cx:"2",cy:"2",r:"2",transform:"translate(361.914 82)"})))),help:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"8.226",viewBox:"0 0 6 8.226"},React.createElement("path",{id:"Path_23222","data-name":"Path 23222",d:"M361.369,288.944a1.569,1.569,0,0,0-1.026,1.453v.365h-1.014a4.251,4.251,0,0,1,.119-1.217,2.424,2.424,0,0,1,1.026-1.126c.9-.536,1.311-1.088,1.252-1.656-.089-.81-.611-1.238-1.56-1.292a1.956,1.956,0,0,0-2.1,1.656l-1.079-.466.178-.418c.492-1.147,1.554-1.7,3.179-1.656,1.607.08,2.485.783,2.633,2.1q.134,1.254-1.607,2.262Zm-1.014,3.865h-1.026v-1.034h1.026Z",transform:"translate(-356.985 -284.584)",fill:"#170d44"})),"angle-right":React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"5.81",height:"10.121",viewBox:"0 0 5.81 10.121"},React.createElement("path",{id:"Path_23963","data-name":"Path 23963",d:"M3290.465,368.331l4,4-4,4",transform:"translate(-3289.404 -367.271)",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",opacity:"0.8"})),"angle-left":React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"5.811",height:"10.121",viewBox:"0 0 5.811 10.121"},React.createElement("path",{id:"Path_23952","data-name":"Path 23952",d:"M3294.464,368.331l-4,4,4,4",transform:"translate(-3289.714 -367.271)",fill:"none",stroke:"#147dfe",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})),"angle-down":React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),"angle-up":React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M18 15L12 9L6 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))};const m=function(e){var t=e.icon;return p[t]},d=function(e){var t=e.onClick,r=e.type,n=void 0===r?"button":r,a=e.label,o=e.className,i=void 0===o?"":o,c=e.disabled,l=void 0!==c&&c;return"string"==typeof a?React.createElement("button",{dangerouslySetInnerHTML:{__html:a},type:n,onClick:t,className:i,disabled:l}):React.createElement("button",{type:n,onClick:t,className:i,disabled:l},a)},v=function(e){var t=e.value,r=e.onChange,n=e.min,a=void 0===n?-1/0:n,o=e.max,i=void 0===o?1/0:o;return React.createElement("div",{className:"wte-qty-number wte-booking-pc-counter","data-info":'{"packageID":6052,"catID":15}'},React.createElement(d,{className:"prev wte-down",disabled:t-1<a,onClick:function(){return r(t-1)},label:s}),React.createElement("input",{type:"text",value:t,readOnly:!0}),React.createElement(d,{className:"next wte-up",disabled:t+1>i,onClick:function(){return r(t+1)},label:f}))};var y=r(1760);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const g=function(e){var t,r,a=e.options,o=e.checked,i=e.onChange,c=e.isShowMore,l=void 0!==c&&c,u=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],f=u[1],p=!s&&l?a.slice(0,3):a;return React.createElement("div",{className:"wte-button-group",role:"group","aria-label":"Toggle Button Group"},p.map((function(e){var t=e.label,r=e.value;return React.createElement("div",{key:r},React.createElement("input",{type:"radio",name,id:"btn_radio_".concat(r),style:{position:"absolute",clip:"rect(0, 0, 0, 0)",pointerEvents:"none"},autoComplete:"off",checked:r===o,onChange:function(){return i(r)}}),React.createElement("label",{className:"wte-check-button".concat(r===o?" checked":""),htmlFor:"btn_radio_".concat(r),dangerouslySetInnerHTML:{__html:t}}))})),l&&a.length>3&&React.createElement("button",{type:"butotn",className:"wte-check-button",onClick:function(){return f(!s)},style:{paddingLeft:"20px",paddingRight:"20px"}},s?(0,y.__)("Show Less","wp-travel-engine"):(0,y.__)("Show More","wp-travel-engine"),React.createElement(m,{icon:s?"angle-up":"angle-down"})))};var b=r(4915),w=["content","children"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(null,arguments)}const j=function(e){var t=e.content,r=e.children,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,w);return React.createElement(b.Ay,E({interactive:!0,content:t},n),r)};var k=wteL10n.priceFormat;const R=function(e){var t=e.value,r=e.noHTML,n=void 0!==r&&r,a=e.convert,o=void 0===a||a;return React.createElement("span",{dangerouslySetInnerHTML:{__html:k(t).format(n,o)}})},O=function(e){var t=e.value,r=e.options,n=e.onChange;return React.createElement("div",{className:"wpte-select-options"},React.createElement("select",{className:"option-toggle",value:t,onChange:function(e){return n(e.target.value)}},null==r?void 0:r.map((function(e,t){var r=e.value,n=e.label;return React.createElement("option",{key:r,value:r},n)}))))};var S=function(e){var t=e.direction,r=void 0===t?"horizontal":t,n=e.required,a=void 0!==n&&n,o=e.label,i=e.helpText,c=e.hasSale,l=e.actualPrice,u=e.price,s=e.ageGroup,f=e.perTextLabel,p=e.counter,d=p.min,y=p.max,h=p.onChange,g=p.value,b=e.afterLabel,w=void 0===b?"":b;return""===u?null:React.createElement("div",{className:"wte-trip-guest-wrapper ".concat(r)},React.createElement("div",{className:"check-in-wrapper"},React.createElement("label",{dangerouslySetInnerHTML:{__html:"".concat(o).concat(s&&" (".concat(s,") ")||"").concat(a?'<span class="wte-required" style="color:red">&nbsp;*</span>':"")}}),i&&React.createElement(j,{trigger:"click",content:React.createElement("div",{dangerouslySetInnerHTML:{__html:i}})},React.createElement("span",{className:"wte-meta-help"},React.createElement(m,{icon:"help"}))),w),React.createElement("div",{className:"select-wrapper"},React.createElement("div",{className:"amount-per-person"},c&&React.createElement("span",{className:"regular-price"},React.createElement("del",null,React.createElement(R,{value:l}))),React.createElement("span",{className:"offer-price"},React.createElement(R,{value:u})),f&&React.createElement("span",{className:"per-text"},f)),React.createElement(v,{value:g,min:d,max:y,onChange:h})))},_=function(e){var t=e.children,r=e.heading;return React.createElement(React.Fragment,null,r&&React.createElement("div",{className:"wte-option-heading"},r," "),React.createElement("div",{className:"wte-trip-options"},t()))},T=wteL10n.locale;const x=function(e){var t=e.options,r=(0,n.useRef)(null),a=(0,n.useRef)(null),o=(0,n.useCallback)((function(){var e,n,o;a.current&&a.current.destroy(),a.current=flatpickr(r.current,t),flatpickr.localize(null!==(e=null===(n=flatpickr)||void 0===n||null===(n=n.l10ns)||void 0===n?void 0:n[null!==(o=T.split("_")[0])&&void 0!==o?o:"en"])&&void 0!==e?e:"en")}),[t]);return(0,n.useEffect)((function(){return o(),function(){a.current&&a.current.destroy()}}),[o]),React.createElement("div",{ref:r})};var P=r(5001);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const A=function(e){var t,r,a=e.onDateChange,o=e.onTimeChange,i=Ye(),l=i.state,s=(i.setState,l.tripID),f=l.availableTimes,p=l.summary,m=l.summary,d=m.selectedTripDate,v=m.selectedTimeSlot,y=(0,c.A)((function(e){return e("wptravelengine").getTripDates(s)}),[s]),h=(0,n.useMemo)((function(){return null==y?void 0:y.reduce((function(e,t){return D(D({},e),t.dates)}),{})}),[y]),b=Object.keys(h).sort()[0];(0,n.useEffect)((function(){setTimeout((function(){!d&&a(Object.keys(h).sort()[0])}),100)}),[b]);var w=null!==(t=null==y?void 0:y.filter((function(e){return!!e.dates[d]})))&&void 0!==t?t:[];return React.createElement("div",{className:"wte-process-tab-content-wrapper"},React.createElement("div",{id:"wte-booking-datetime-content"},React.createElement("div",{className:"wte-process-tab-content"},React.createElement("div",{className:"wte-booking-date-wrap"},React.createElement(x,{options:{inline:!0,defaultDate:null!==(r=p.selectedTripDate)&&void 0!==r?r:b,minDate:b,dateFormat:"Y-m-d",onChange:function(e,t){return a(t)},disable:[function(e){var t,r,n=null!==(t=null===(r=h[u()(e).format("YYYY-MM-DD")])||void 0===r?void 0:r.seats)&&void 0!==t?t:-1;return(0,P.Et)(n)&&n<=0||!1}]}}),f.length>0&&React.createElement("div",null,React.createElement("div",{className:"wte-booking-times"},w.map((function(e,t){var r=e.package,a=r.id,i=r.name,c=f.filter((function(e){var t=e.package_id;return a===t}));return c.length<=0?null:React.createElement(n.Fragment,{key:t},w.length>1&&i&&React.createElement("span",{className:"wte-package-name",dangerouslySetInnerHTML:{__html:i}}),React.createElement(g,{options:c.map((function(e){var t=e.from,r=e.to,n=e.key;return{label:"".concat(u()(t).format("h:mm A")," - ").concat(u()(r).format("h:mm A")),value:n}})),checked:v,onChange:o,isShowMore:!0}))}))))))))};var C=r(2543);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}var M=["service"];function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return(t=function(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(null,arguments)}function H(e,t){if(e){if("string"==typeof e)return W(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(e){var t,r,a,o,i=e.item,c=e.onChange,l=(a=(0,n.useState)(i.options[0].key),o=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(a,o)||H(a,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1],f=Ye().state.summary.extraServices,p=i.title,m=i.options,d=i.required,v=i.multiple,y={required:d},h=(0,C.keyBy)(f,"id");if(v&&m.length>1)return m.map((function(e,t){var r,n,a=e.price,o=e.label,i=e.key;return React.createElement(S,{key:i,label:o,price:a,direction:"vertical",perTextLabel:"/ ".concat(e.serviceUnit.label),helpText:e.description,counter:{min:0,max:1/0,value:null!==(r=null===(n=h[i])||void 0===n?void 0:n.qty)&&void 0!==r?r:0,onChange:function(t){return c(e,t)}}})}));var g=!v&&m.length>1?React.createElement(O,{options:m.map((function(e,t){var r=e.label;return{value:e.key,label:r}})),value:u,onChange:function(e){s(e),c({key:e,price:0},0)}}):null,b=m.find((function(e){return e.key===u}));return React.createElement(S,F({},y,{perTextLabel:"/ ".concat(m[0].serviceUnit.label),price:b.price,afterLabel:g,label:p,helpText:b.description,counter:{min:0,max:1/0,value:null!==(t=null===(r=h[b.key])||void 0===r?void 0:r.qty)&&void 0!==t?t:0,onChange:function(e){return c(b,e)}}}))};const U=function(){var e=Ye(),t=e.state,r=e.setState,a=t.tripID,o=t.summary.extraServices,i=(0,c.A)((function(e){return e("wptravelengine").getTripServices(a)}),[a]);(0,n.useEffect)((function(){r({processToNext:o.filter((function(e){return e.required})).every((function(e){return e.qty>0}))})}),[]);var l=function(e){return function(n,a){var i=n.key,c=n.price,l=n.label,u=e.required,s=e.options,f=e.multiple,p=parseFloat(c)*a,m=o;l||(m=m.filter((function(t){var r=t.id;return!e.options.some((function(e){return e.key===r}))}))),m.forEach((function(e,t){var r=e.id;s.find((function(e){return e.key===r}))&&u&&(m[t].required=r===i,f&&(m[t].required=r===i?s.filter((function(e){return e.key!==r})).every((function(e){var t=e.key;return 0===m.find((function(e){return e.id===t})).qty})):m[t].qty>0))}));var d,v=m.findIndex((function(e){return e.id===i}));if(-1!==v)m[v]=z(z({},m[v]),{},{qty:a,total:p});else{var y=s.find((function(e){return e.key===i})),h=y.price,g=y.serviceUnit,b=y.label;m=[].concat(function(e){if(Array.isArray(e))return W(e)}(d=m)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||H(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{id:i,label:b,unitPrice:h,qty:a,total:p,perTextLabel:" / ".concat(g.label),required:u}])}r({processToNext:m.filter((function(e){return e.required})).every((function(e){return e.qty>0})),summary:z(z({},t.summary),{},{extraServices:m})})}};return React.createElement("div",{className:"wte-process-tab-content-wrapper"},React.createElement("h5",{className:"wte-process-tab-title"},(0,y.__)("Select Extra Services: ","wp-travel-engine")),React.createElement(_,null,(function(){return i.map((function(e){return(t=Y,function(e){var r=e.service,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,M),a=r.multiple,o=r.options,i=r.id,c=r.title,l=r.required;return a&&o.length>1?React.createElement("div",{className:"wte-trip-options",key:i},React.createElement("h5",{className:"wte-process-tab-title"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c}}),l&&React.createElement("span",{className:"wte-required",style:{color:"red"}}," *")),React.createElement("div",{className:"wte-es-with-multiple-options wte-owl-carousel"},React.createElement(t,F({item:r},n)))):React.createElement(t,F({item:r},n,{key:i}))})({service:e,onChange:l(e)});var t}))})))};var V=function(e){var t=e.options,r=e.onChange,n=e.selected;return React.createElement(g,{options:t,onChange:r,checked:n})},Z=function(e){var t=e.discountList,r=e.perTextLabel;return React.createElement(b.Ay,{interactive:!0,theme:"light",placement:"bottom",trigger:"click",className:"wpte-select-options-wrapper wpte-group-discount-options",content:React.createElement("ul",{className:"options-list"},React.createElement("li",{className:"list-heading"},React.createElement("span",{className:"no-travelers"},(0,y.__)("Number Of Travellers","wp-travel-engine")),React.createElement("span",{className:"price-per-person"},(0,y.__)("Price","wp-travel-engine")," ",r)),null==t?void 0:t.map((function(e,t){var r=e.from,n=e.to,a=e.rate;return React.createElement("li",{key:t},React.createElement("span",{className:"traveler-title"},"".concat(r).concat(n?" - ".concat(n):"+")),React.createElement("span",{className:"traveler-price"},React.createElement(R,{value:a})))})))},React.createElement("div",{className:"wpte-select-options wpte-group-discount-options wte-popper active"},React.createElement("button",{type:"buttton",className:"option-toggle"},(0,y.__)("Group Discount","wp-travel-engine"))))},$=function(e){var t=e.items,r=e.onChange,n=Ye().state,a=n.availableSeats,o=n.summary.travelers,i=(0,C.keyBy)(o,"id");return t.map((function(e){var t,n,c,l,u,s,f=e.id,p=e.price,m=e.sale_price,d=e.has_sale,v=void 0!==d&&d,y=e.min_pax,h=e.age_group,g=(0,C.isNumber)(a)?a-o.filter((function(e){return e.id!==f})).reduce((function(e,t){return e+t.qty}),0):1/0,b=(null!==(t=null==i||null===(n=i[f])||void 0===n?void 0:n.qty)&&void 0!==t?t:y)<y?y:null!==(c=null==i||null===(l=i[f])||void 0===l?void 0:l.qty)&&void 0!==c?c:y,w=v?m:p;e.has_group_pricing&&(w=null!==(u=null===(s=e.group_pricing)||void 0===s||null===(s=s.find((function(e){var t=e.from,r=e.to;return r?b>=t&&b<=r:b>=t})))||void 0===s?void 0:s.rate)&&void 0!==u?u:w);var E=(0,C.isNumber)(g)||(0,C.isNumber)(e.max_pax)?parseInt(e.max_pax)<g?e.max_pax:g:1/0,j="/ "+e.pricing_type.label;return React.createElement(S,{key:f,label:e.label,price:w,ageGroup:h,hasSale:v,actualPrice:p,perTextLabel:j,counter:{min:y,max:E,onChange:function(e){return r(f,e)},value:b},afterLabel:e.has_group_pricing&&React.createElement(Z,{discountList:e.group_pricing,perTextLabel:j})})}))},J=function(){return React.createElement(React.Fragment,null,React.createElement("span",{className:"text-left"},(0,y.__)("Travellers","wp-travel-engine")),React.createElement("span",{className:"text-right"},(0,y.__)("Quantity","wp-travel-engine")))};const K=function(e){var t=e.onChange,r=e.onTravelerChange,a=Ye(),o=a.state,i=o.tripID,l=o.availableSeats,u=o.availableTripPackages,s=o.summary,f=a.setState,p=s.selectedTripPackageID,m=s.travelers,d=(0,c.A)((function(e){return e("wptravelengine").getTripPackages(i)}),[i]),v=d.find((function(e){return e.id===p})),h=(null==v?void 0:v.traveler_categories)||[],g=l>0||""===l;return(0,n.useEffect)((function(){f({processToNext:s.travelers.reduce((function(e,t){return e+t.qty}),0)>0})}),[m]),React.createElement("div",{className:"wte-process-tab-content-wrapper"},React.createElement("div",null,React.createElement("div",{className:"wte-process-tab-content"},React.createElement("div",{className:"wte-button-group wte-package-type"},React.createElement(V,{options:u.map((function(e){return{label:d.find((function(t){return t.id===e})).name,value:e}})),selected:p,onChange:t})),(null==v?void 0:v.description)&&React.createElement("div",{className:"wte-selected-package-description",dangerouslySetInnerHTML:{__html:v.description}}),React.createElement("hr",null),g?React.createElement(_,{heading:React.createElement(J,null)},(function(){return React.createElement($,{items:h,onChange:r})})):React.createElement("div",{className:"failed-msg"},(0,y.__)("Seats are not available for selected package","wp-travel-engine")))))};var X=r(9748),Q=r(2733),ee=r(6271);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){re=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:S(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",m="suspendedYield",d="executing",v="completed",y={};function h(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,j=E&&E(E(L([])));j&&j!==r&&n.call(j,i)&&(w=j);var k=b.prototype=h.prototype=Object.create(w);function R(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==te(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,r,n){var a=p;return function(o,i){if(a===d)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=_(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=d;var u=f(t,r,n);if("normal"===u.type){if(a=n.done?v:m,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=v,n.method="throw",n.arg=u.arg)}}}function _(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(te(t)+" is not iterable")}return g.prototype=b,a(k,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},R(O.prototype),u(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new O(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},R(k),u(k,l,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return(t=function(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie={trips:{},isLoading:!0},ce={setTrip:function(e){return{type:"SET_TRIP",data:e}},setTripDates:function(e,t){return{type:"SET_TRIP_DATES",id:t,data:e}},setTripServices:function(e,t){return{type:"SET_TRIP_SERVICES",id:t,data:e}},setTripPackages:function(e,t){return{type:"SET_TRIP_PACKAGES",id:t,data:e}},fetchFromAPI:function(e){return{type:"FETCH_FROM_API",path:e}},fetchTripData:function(e){return{type:"FETCH_TRIP_DATA",id:e,path:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}}},le={FETCH_FROM_API:function(e){return(0,X.A)({path:e.path})},FETCH_TRIP_DATA:function(e){var t=e.id,r=e.path,n=window.wpApiSettings.root;return(0,X.A)({url:"".concat(n,"wptravelengine/v2/trips/").concat(t,"/").concat(r)})}},ue={getTrip:re().mark((function e(t,r){var n;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.fetchTripData(t,r);case 2:return n=e.sent,e.abrupt("return",ce.setTrip(n));case 4:case"end":return e.stop()}}),e)})),getTripDates:re().mark((function e(t){var r;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.fetchTripData(t,"dates");case 2:return r=e.sent,e.abrupt("return",ce.setTripDates(r,t));case 4:case"end":return e.stop()}}),e)})),getTripServices:re().mark((function e(t){var r;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.fetchTripData(t,"services");case 2:return r=e.sent,e.abrupt("return",ce.setTripServices(r,t));case 4:case"end":return e.stop()}}),e)})),getTripPackages:re().mark((function e(t){var r;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.fetchTripData(t,"packages");case 2:return r=e.sent,e.abrupt("return",ce.setTripPackages(r,t));case 4:case"end":return e.stop()}}),e)}))},se=(0,Q.A)("wptravelengine",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRIP":return ae(ae({},e),{},{isLoading:!1,trips:ae(ae({},e.trips),{},oe({},t.data.id,ae(ae({},e.trips[t.data.id]),{},{trip:t.data})))});case"SET_TRIP_DATES":return ae(ae({},e),{},{isLoading:!1,trips:ae(ae({},e.trips),{},oe({},t.id,ae(ae({},e.trips[t.id]),{},{dates:t.data})))});case"SET_TRIP_SERVICES":return ae(ae({},e),{},{isLoading:!1,trips:ae(ae({},e.trips),{},oe({},t.id,ae(ae({},e.trips[t.id]),{},{services:t.data})))});case"SET_TRIP_PACKAGES":return ae(ae({},e),{},{isLoading:!1,trips:ae(ae({},e.trips),{},oe({},t.id,ae(ae({},e.trips[t.id]),{},{packages:t.data})))});default:return e}},actions:ce,selectors:{getState:function(e){return e},getTrip:function(e,t){var r,n;return null!==(r=null===(n=e.trips)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.trip)&&void 0!==r?r:{}},getTripDates:function(e,t){var r,n;return null!==(r=null===(n=e.trips)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.dates)&&void 0!==r?r:[]},getTripServices:function(e,t){var r,n;return null!==(r=null===(n=e.trips)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.services)&&void 0!==r?r:[]},getTripPackages:function(e,t){var r,n;return null!==(r=null===(n=e.trips)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.packages)&&void 0!==r?r:[]},isLoading:function(e){return e.isLoading}},controls:le,resolvers:ue});function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return(t=function(e){var t=function(e){if("object"!=fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,ee.kz)(se);var ve=function(e){var t=e.title,r=e.items;return r.length<1?null:React.createElement("div",{className:"wte-booking-details"},React.createElement("h6",{className:"wte-booking-details-title"},t),React.createElement("ul",null,null==r?void 0:r.map((function(e,t){var r=e.label,n=e.qty,a=e.total,o=e.unitPrice,i=e.perTextLabel;return n<1?null:React.createElement("li",{key:t},React.createElement("label",null,React.createElement("strong",null,"".concat(n," ").concat(r)),React.createElement("span",{className:"qty"}," (",React.createElement(R,{value:o}),i,")")),React.createElement("div",{className:"amount-figure"},React.createElement("strong",null,React.createElement(R,{value:a}))))}))))};const ye=function(){var e,t,r,a,o=Ye(),i=o.state,l=i.tripID,u=i.summary,s=i.availableTimes,f=o.state,p=o.setState,m=o.getTotal,d=u.selectedTripDate,v=u.travelers,h=u.extraServices,g=u.selectedTripPackageID,b=u.selectedTimeSlot,w=(a=l,(0,c.A)((function(e){return e("wptravelengine").getTrip(a)}),[a]));(0,n.useEffect)((function(){w&&p(me(me({},f),{},{isLoading:!1}))}),[w]);var E=(0,c.A)((function(e){return e("wptravelengine").getTripPackages(l)}),[l]).find((function(e){return e.id===g})),j=new wteL10n.dateFormat(d);return React.createElement("aside",{className:"wte-popup-sidebar"},React.createElement("div",{className:"wte-booking-summary"},React.createElement("div",{id:"wte-booking-summary"},React.createElement("h5",{className:"wte-booking-block-title"},(0,y.__)("Booking Summary","wp-travel-engine")),React.createElement("h2",{className:"wte-booking-trip-title",dangerouslySetInnerHTML:{__html:(null==w||null===(e=w.title)||void 0===e?void 0:e.rendered)||""}}),d&&React.createElement("div",{className:"wte-booking-dates"},React.createElement("p",{className:"wte-booking-starting-date"},React.createElement("strong",null,(0,y.__)("Starting Date:","wp-travel-engine"))," ",j.format(),b&&" at ".concat(moment(null===(t=s.find((function(e){return e.key===b})))||void 0===t?void 0:t.from).format("h:mm A")))),React.createElement("div",{className:"wte-booking-summary-info"},E&&React.createElement("h5",{className:"wte-booking-summary-info-title",dangerouslySetInnerHTML:{__html:"".concat((0,y.__)("Package:","wp-travel-engine")," ").concat(E.name)}}),React.createElement("div",{className:"wte-booking-trip-info"},React.createElement(ve,{title:(0,y.__)("Travellers","wp-travel-engine"),items:v}),h.find((function(e){return e.total>0}))&&React.createElement(ve,{title:(null===(r=wteL10n)||void 0===r||null===(r=r.l10n)||void 0===r?void 0:r.extraServicesTitle)||(0,y.__)("Extra Services","wp-travel-engine"),items:h})),React.createElement("div",{className:"total-amount"},React.createElement("p",{className:"price"},React.createElement("span",{className:"total-text"},(0,y.__)("Total :","wp-travel-engine")),React.createElement(R,{value:m()})))))))};function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ge(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){return(t=function(e){var t=function(e){if("object"!=he(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){if(e){if("string"==typeof e)return ke(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Re=function(e){var t,r,a,o=e.tabs,i=void 0===o?[]:o,c=e.onSubmit,l=e.processToNext,u=(0,n.useRef)(null),s=Ye(),f=s.isLoading,p=s.state,d=p.availableTimes,v=p.currentTab,h=s.state,g=s.setState,b=i.filter((function(e){return null==e?void 0:e.enabled})),w=100/i.length,E=(r=(0,n.useState)({current:0,completed:[],barWidth:w}),a=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(r,a)||je(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=E[0],k=E[1],R=(j.current,j.completed),O=j.barWidth;return(0,n.useEffect)((function(){d.length>0&&u.current.scrollTo({top:u.current.scrollHeight,left:0,behavior:"smooth"})}),[d]),React.createElement(React.Fragment,null,React.createElement("nav",{className:"wte-process-nav"},React.createElement("div",{className:"wte-process-container"},React.createElement("ul",{className:"wte-process-nav-list",style:{"--step-bar-width":"".concat(O,"%")}},b.map((function(e,t){var r=e.id,n=e.title,a=e.icon,o=v===t?"active":"",i=R.includes(t)?"finish":"",c=null==R?void 0:R.includes(t);return React.createElement("li",{key:t,id:r,className:"wte-process-nav-item ".concat(o," ").concat(i)},React.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),l&&c&&k(we(we({},j),{},{completed:[].concat(ge(R),[!R.includes(t)&&v]),barWidth:w*(t+1)})),l&&c&&g(we(we({},h),{},{currentTab:t}))}},a&&React.createElement("span",{className:"wte-icon"},a),n,React.createElement("span",{className:"arrow"},React.createElement(m,{icon:"angle-right"}))))}))))),React.createElement("div",{className:"wte-process-tabs"},React.createElement("div",{className:"wte-process-container"},React.createElement("div",{ref:u,className:"wte-process-tab-item".concat(f?" loading":""),style:{display:"block"}},!f&&(null===(t=b[v])||void 0===t?void 0:t.component)),React.createElement("div",{className:"wte-process-tab-controller"},0!==v&&React.createElement("button",{type:"button",className:"wte-process-btn wte-process-btn-prev",onClick:function(){v>0&&(k(we(we({},j),{},{barWidth:O-w})),g(we(we({},h),{},{currentTab:v-1})))}},React.createElement(m,{icon:"angle-left"}),(0,y.__)("Back","wp-travel-engine")),React.createElement("button",{type:"button",className:"wte-process-btn wte-process-btn-next",onClick:function(){l&&v<b.length-1&&(k(we(we({},j),{},{completed:[].concat(ge(R),[!R.includes()&&v]),barWidth:O+w})),g(we(we({},h),{},{currentTab:v+1}))),l&&v===b.length-1&&c()},disabled:!l},b.length-1===v?(0,y.__)("Proceed To Checkout","wp-travel-engine"):(0,y.__)("Continue","wp-travel-engine"))))))};function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}var Se=["tripID","nonce","wpXHR","cartVersion","parentRef"];function _e(){_e=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:S(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",m="suspendedYield",d="executing",v="completed",y={};function h(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,j=E&&E(E(L([])));j&&j!==r&&n.call(j,i)&&(w=j);var k=b.prototype=h.prototype=Object.create(w);function R(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Oe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,r,n){var a=p;return function(o,i){if(a===d)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=_(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=d;var u=f(t,r,n);if("normal"===u.type){if(a=n.done?v:m,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=v,n.method="throw",n.arg=u.arg)}}}function _(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Oe(t)+" is not iterable")}return g.prototype=b,a(k,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},R(O.prototype),u(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new O(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},R(k),u(k,l,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Te(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function xe(e){return function(e){if(Array.isArray(e))return Ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return(t=function(e){var t=function(e){if("object"!=Oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){if(e){if("string"==typeof e)return Ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ie(e,t):void 0}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ae={isOpen:!1,availableSeats:0,availableTripPackages:[],availableTimes:[],processToNext:!1,isLoading:!0,currentTab:0,summary:{selectedTripDate:null,selectedTimeSlot:null,selectedTripPackageID:null,travelers:[],extraServices:[]}},Ce=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=(0,C.keyBy)(null!==(t=r.travelers)&&void 0!==t?t:[],"id");return e.map((function(e){var t=e.id,r=e.min_pax,i=e.has_sale,c=e.sale_price,l=e.price,u=e.pricing_type,s=e.has_group_pricing,f=e.group_pricing,p=e.label;if(a&&a!==t)return o[t];var m,d,v=i?c:l,y=null!=n?n:r;s&&(v=null!==(m=null===(d=f.find((function(e){var t=e.from,r=e.to;return r?y>=t&&y<=r:y>=t})))||void 0===d?void 0:d.rate)&&void 0!==m?m:v);var h=0!==y&&"per-group"===u.value?v:y*v;return{id:t,qty:y,unitPrice:v,total:h,label:p,perTextLabel:" / ".concat(u.label)}}))};const qe=function(e){var t,r,a,o=e.tripID,l=e.nonce,u=e.wpXHR,s=e.cartVersion,f=(e.parentRef,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}}(e,Se),r=(0,n.useState)(Le(Le({},Ae),{},{tripID:o})),a=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(r,a)||De(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],d=f[1],v=function(e){return d((function(t){return Le(Le({},t),e)}))},h=p.isOpen,g=p.summary,b=p.availableSeats,w=p.isLoading,E=g.travelers,j=g.extraServices,k=g.selectedTripPackageID,R=g.selectedTripDate,O=g.selectedTimeSlot,S=(0,c.A)((function(e){return e("wptravelengine").getTripServices(o)}),[o]),_=(0,c.A)((function(e){return e("wptravelengine").getTripDates(o)}),[o]),T=(null===(t=(0,c.A)((function(e){return e("wptravelengine").getTripPackages(o)}),[o]).find((function(e){return e.id===k})))||void 0===t?void 0:t.traveler_categories)||[];function x(){return Object.values(E).reduce((function(e,t){return e+t.total}),0)+Object.values(j).reduce((function(e,t){return e+t.total}),0)}function P(e){d((function(t){return Le(Le({},t),{},{summary:Le(Le({},t.summary),e)})}))}function L(e){P({selectedTripDate:e,selectedTimeSlot:null})}function N(){var e;return e=_e().mark((function e(){var t,r,n,a,i,c,f,m,d;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.availableTimes.find((function(e){return e.key===O})),r=(r=E.filter((function(e){return e.qty>0}))).length>0?r:[],n={},a=0,i=r.reduce((function(e,t){var r=T.find((function(e){return e.id===t.id}));return n[t.id]=t.qty,a+=t.qty,e[t.id]={pax:t.qty,salePrice:t.unitPrice,groupDiscountPrice:0,cost:t.unitPrice,categoryInfo:{label:r.label,price:r.price,enabledSale:r.has_sale,salePrice:r.sale_price,minPax:r.min_pax,maxPax:r.max_pax,groupPricing:r.group_pricing,enabledGroupDiscount:r.has_group_pricing,pricingType:r.pricing_type.value}},e}),{}),c={cartTotal:x(),nonce:l,packageID:k,pricingOptions:i,timeRange:t&&[t.from,t.to],traveler:a,tripDate:R,travelers:n,tripID:o,tripTime:t&&t.from,cartVersion:s},j.length>0&&(f=j.filter((function(e){return 0!==e.qty})),c=Le(Le({},c),{},{extraServices:f.map((function(e){return{extra_service:e.label,price:e.unitPrice,qty:e.qty}}))})),e.next=10,fetch("".concat(u,"?action=wte_add_trip_to_cart&cart_version=").concat(c.cartVersion,"&_nonce=").concat(l),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 10:if((m=e.sent).ok){e.next=13;break}throw new Error(m.statusText);case 13:return e.prev=13,e.next=16,m.json();case 16:if(!(d=e.sent).success){e.next=22;break}return window.location.href=d.data.redirect,e.abrupt("return",d);case 22:if(!d.data||!d.data[0]){e.next=24;break}throw new Error(d.data[0]);case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(13),Error(e.t0.message);case 29:case"end":return e.stop()}}),e,null,[[13,26]])})),N=function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Te(o,n,a,i,c,"next",e)}function c(e){Te(o,n,a,i,c,"throw",e)}i(void 0)}))},N.apply(this,arguments)}return(0,n.useEffect)((function(){document.dispatchEvent(new Event("bookingCalendarReady"))}),[]),(0,n.useEffect)((function(){window.wptravelengineBooking=window.wptravelengineBooking||{},window.wptravelengineBooking.store={state:p,setState:function(e){d((function(t){return Le(Le({},t),e)}))},setTripDate:L,setSummary:P}}),[]),(0,n.useEffect)((function(){var e=S.filter((function(e){return e.required})).flatMap((function(e){return e.options.map((function(e){var t=e.key,r=e.price,n=e.label,a=e.serviceUnit;return{id:t,label:n,unitPrice:r,qty:0,total:0,perTextLabel:"/ ".concat(a.label),required:!0}}))})),t=b>=T.reduce((function(e,t){return e+t.min_pax}),0)||""===b;v({processToNext:!!k,summary:Le(Le({},g),{},{travelers:t?Ce(T):[],extraServices:e})})}),[k]),(0,n.useEffect)((function(){if(R){var e,t,r,n,a=_.filter((function(e){return!!e.dates[R]})),o=a.reduce((function(e,t){var r=t.dates,n=(null==r?void 0:r[R].times)||[];return[].concat(xe(e),xe(n))}),[]),i=null!==(e=(n=(o=o.map((function(e){var t=a.find((function(t){return t.dates[R].times.find((function(t){return t.key===e.key}))})).package.id;return Le(Le({},e),{},{package_id:t})}))).length<1?a.map((function(e){return e.package.id})):a.filter((function(e){return e.dates[R].times.find((function(e){return e.key===O}))})).map((function(e){return e.package.id})))[0])&&void 0!==e?e:null,c=null===(t=a.find((function(e){return e.package.id===i})))||void 0===t||null===(t=t.dates)||void 0===t?void 0:t[R],l=0===(null==c?void 0:c.times.length)?null==c?void 0:c.seats:null==c||null===(r=c.times.find((function(e){return e.key===O})))||void 0===r?void 0:r.seats;v({summary:Le(Le({},g),{},{selectedTripPackageID:i}),availableSeats:l,availableTripPackages:n,availableTimes:o,processToNext:!!R&&i})}}),[R,O,_]),React.createElement(We.Provider,{value:{state:p,setState:v,getTotal:x,updateSummary:P}},React.createElement("p",{style:{display:"none"}},"WP Travel Engine Booking Initialized."),React.createElement(i,{isOpen:h,setIsOpen:function(){v({isOpen:!p.isOpen})}},React.createElement("div",{className:"wte-process-layout ".concat(w?"is-loading":"")},React.createElement(Re,{processToNext:p.processToNext,onSubmit:function(){return N.apply(this,arguments)},tabs:[{id:"date-time",title:(0,y.__)("Date & Time","wp-travel-engine"),component:React.createElement(A,{onTimeChange:function(e){P({selectedTimeSlot:e})},onDateChange:L}),icon:React.createElement(m,{icon:"calendar"}),enabled:!0},{id:"package-type",title:(0,y.__)("Package Type","wp-travel-engine"),component:React.createElement(K,{onChange:function(e){var t,r;v({availableSeats:null!==(t=null===(r=_.filter((function(e){return!!e.dates[R]})).find((function(t){return t.package.id===e})))||void 0===r||null===(r=r.dates)||void 0===r||null===(r=r[R])||void 0===r?void 0:r.seats)&&void 0!==t?t:"",summary:Le(Le({},g),{},{selectedTripPackageID:e})})},onTravelerChange:function(e,t){P({travelers:Ce(T,g,t,e)})}}),icon:React.createElement(m,{icon:"suitcase"}),enabled:!0},{id:"extra-services",title:(0,y.__)("Extra Services","wp-travel-engine"),component:React.createElement(U,null),icon:React.createElement(m,{icon:"dots"}),enabled:S.length>0}]}),React.createElement(ye,null))))};var Me=r(159);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ze.apply(null,arguments)}function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){He(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.wptravelengineBooking=window.wptravelengineBooking||{},window.wptravelengineBooking.app=qe;var We=(0,n.createContext)();function Ye(){return(0,n.useContext)(We)}(0,Me.A)((function(){var e,t,r,o=null!==(e=document.querySelector("#wptravelengine-trip-booking-modal"))&&void 0!==e?e:null;o||((o=document.createElement("div")).style.display="none",o.style.height=0,o.id="wptravelengine-trip-booking-modal",document.body.appendChild(o)),(0,a.H)(o).render(React.createElement(n.StrictMode,null,React.createElement(qe,ze({parentRef:o},Fe({},JSON.parse(null!==(t=o.dataset.tripBooking)&&void 0!==t?t:"{}")))))),null===(r=document.querySelectorAll("[data-trip-booking],#open-booking-modal,.wte-fsd-list-booknow-btn"))||void 0===r||r.forEach((function(e){var t,r=JSON.parse(null!==(t=e.dataset.tripBooking)&&void 0!==t?t:"{}");if(r.isOpen=!0,"button"===e.tagName.toLowerCase()&&(e.disabled=!1),e.classList.contains("wte-fsd-list-booknow-btn")&&(e.disabled=!1,e.classList.remove("btn-loading"),!r.tripID&&document.body.classList.contains("single-trip"))){var n;r.tripID=null===(n=document.body.className.match(/postid-(\d+)/))||void 0===n?void 0:n[1];var a=e.dataset.info;a&&(r.summary={selectedTripDate:moment(1e3*+a).format("YYYY-MM-DD")})}e.addEventListener("click",(function(){var e,t,n=window.wptravelengineBooking.store,a=n.state,o=n.setState;n.setTripDate,setTimeout((function(){o({isOpen:!0})})),o({summary:Fe(Fe({},a.summary),{},{selectedTripDate:null!==(e=null===(t=r.summary)||void 0===t?void 0:t.selectedTripDate)&&void 0!==e?e:null})})}))}))}))},5358:(e,t,r)=>{var n={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=5358}}]);